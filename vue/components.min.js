define("bc/vue/theme",["jquery","vue"],function(t,e){"use strict";var i={UNIT_EM:{UNIT:"em",SIZE:1,STEP:.1,MIN:.1,MAX:4},UNIT_PX:{UNIT:"px",SIZE:16,STEP:1,MIN:1,MAX:64}};return e.component("bc-theme",{template:'<div class="ui-widget-content" style="margin:0.2em;padding:0.2em;font-size:16px;position:absolute;right:1em;top:0">字体大小：<input type="number" min="{{min}}" max="{{max}}" step="{{step}}" v-model="size"  style="width:3em"/><label><input type="radio" value="em" v-model="unit">em</label><label><input type="radio" value="px" v-model="unit">px</label></div>',replace:!0,props:{size:{type:Number,required:!1,default:i.UNIT_EM.SIZE},unit:{type:String,required:!1,default:i.UNIT_EM.UNIT}},created:function(){this.initByUnit(this.unit),this.fontSize!=i.UNIT_EM.SIZE+i.UNIT_EM.UNIT&&this.change()},data:function(){return{min:i.UNIT_EM.MIN,max:i.UNIT_EM.MAX,step:i.UNIT_EM.STEP}},computed:{fontSize:function(){return this.size+this.unit}},watch:{unit:function(t,e){this.initByUnit(t,e)},fontSize:function(t,e){this.change()}},methods:{initByUnit:function(t,e){"em"==t?(this.min=i.UNIT_EM.MIN,this.max=i.UNIT_EM.MAX,this.step=i.UNIT_EM.STEP,e&&(this.size=this.size/16)):(this.min=i.UNIT_PX.MIN,this.max=i.UNIT_PX.MAX,this.step=i.UNIT_PX.STEP,e&&(this.size=16*this.size))},change:function(){document.body.style.fontSize=this.size+this.unit,this.$nextTick(function(){this.$dispatch("change-font-size",this.size,this.unit)})}}})}),define("bc/vue/button",["jquery","vue"],function(t,e){"use strict";return e.component("bc-button",{template:'<button class="bc-vue-button ui-button ui-widget ui-state-default ui-corner-all" style="font-family:inherit" type="button" :class="btnClass"><span class="ui-button-icon-primary ui-icon" v-if="iconClass" :class="iconClass"></span><span class="ui-button-text">{{text}}<slot></slot></span></button>',replace:!0,props:{text:{type:String,required:!1,default:"　"},iconClass:{type:String,required:!1}},computed:{btnClass:function(){var t=this.text&&"　"!=this.text;return t&&this.iconClass?"ui-button-text-icon-primary":!t&&this.iconClass?"ui-button-icon-only":(t&&this.iconClass,"ui-button-text-only")}},ready:function(){t(this.$el).on({mouseover:function(){t(this).addClass("ui-state-hover")},mouseout:function(){t(this).removeClass("ui-state-hover")}})},beforeDestroy:function(){t(this.$el).off()},methods:{}})}),define("bc/vue/button-set",["jquery","vue"],function(t,e){"use strict";return e.component("bc-button-set",{template:'<div class="bc-vue-button-set ui-buttonset" style="display:inline-block"><div v-for="i in items" data-id="{{i.hasOwnProperty(\'id\') ? i.id : $index}}" class="ui-button ui-widget ui-state-default ui-button-text-only" style="font-family:inherit;font-size:1em" :class="{\'ui-corner-left\': $index == 0, \'ui-corner-right\': $index == items.length - 1, \'ui-state-active\': isActive(i)}" :style="{\'margin-right\': \'-1px\', \'z-index\': value == i.id ? items.length : 0}"><span style="font-size: 1em" class="ui-button-text" @click="clickItem(i, $index)">{{i.label || i}}</span></div></div>',replace:!0,props:{items:{type:Array,required:!0},value:{required:!1,default:null}},created:function(){if(null===this.value)for(var t=0;t<this.items.length;t++)if(this.items[t].active){this.value=this.items[t].id;break}},watch:{value:function(t,e){this.$dispatch("change",t,e)}},methods:{clickItem:function(t,e){this.value="object"==typeof t?t.id:t},isActive:function(t){return"object"==typeof t?this.value==t.id:this.value==t}}})}),define("bc/vue/cors",[],function(){"use strict";function t(t){let e=t.toLowerCase();return(0===e.indexOf("http://")||0===e.indexOf("https://")||0===e.indexOf("//"))&&(n.setAttribute("href",e),n.host!==location.host)}function e(e,i,n){return i||(i={}),n||t(e)?(i.headers||(i.headers={}),i.headers.Authorization=window.localStorage.authorization):i.credentials="include",i}function i(t,i,n,r,o){let a={};return i&&(a.method=i),n&&(a.body=n),r&&(a.headers={"Content-Type":r}),fetch(t,e(t,a,o)).then(function(t){return t.ok?204===t.status?null:t.json():t.text().then(function(t){throw new Error(t)})})}let n=document.createElement("a");return{get:function(t){return i(t,"GET")},post:function(t,e,n){return i(t,"POST",e,n)},appendUrlParams:function(t,e,i){return function(t,e,i){if(!e)return t;let n=[];if(i)for(let t in e)n.push(t+"="+e[t]);else for(let t in e)n.push(t+"="+encodeURIComponent(e[t]));return n.length&&(t+=(-1!==t.indexOf("?")?"&":"?")+n.join("&")),t}(t,e,i)},urlIsCors:t,autoCorsSettings:e,download:function(t,i){return fetch(t,e(t,{method:"GET"})).then(t=>{if(!i){let e=t.headers.get("Content-Disposition");e&&e.includes("filename=")?((i=e.substring(e.indexOf("filename=")+9)).startsWith('"')&&(i=i.substring(1,i.length-1)),i=decodeURIComponent(i)):(e=t.headers.get("filename"),i=e?decodeURIComponent(e):null)}return t.ok?t.blob():t.text().then(function(t){throw new Error(t)})}).then(t=>{const e=window.URL.createObjectURL(t),n=document.createElement("a");n.href=e,n.download=i||"NONAME",n.click()})}}}),define("text!bc/vue/search.html",[],function(){return'<div class="bc-vue-search">\r\n\t<div class="fuzzy" :style="{\'text-align\': align}">\r\n\t\t<div>\r\n\t\t\t<span @click.stop="search" class="search ui-icon ui-icon-search" title="执行查询"></span>\r\n\t\t\t<input debounce="200" @keyup.enter.stop="search" type="text" v-model="value" class="fuzzy ui-widget-content" :placeholder="placeholder" @change.stop>\r\n\t\t\t<span v-if="advanceConfig" @click.stop="toggleAdvance" class="add ui-icon ui-icon-triangle-1-{{showAdvance ? \'n\' : \'s\'}}" title="{{showAdvance ? \'隐藏高级搜索\' : \'显示高级搜索\'}}"></span>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="advance ui-widget-content ui-state-highlight" v-if="showAdvance" :style="advanceStyle">\r\n\t\t<ul class="conditions">\r\n\t\t\t<li class="condition" v-for="c in displayConditions">\r\n\t\t\t\t<div class="label">{{c.label}}</div>\r\n\t\t\t\t<div class="value">\r\n\t\t\t\t\t\x3c!-- 非双值条件：指非 []、(]、[)、() --\x3e\r\n\t\t\t\t\t<template v-if="!c.diadic">\r\n\t\t\t\t\t\t\x3c!-- 非 in 和单选多选框 --\x3e\r\n\t\t\t\t\t\t<template v-if="c.operator != \'in\' && c.ui != \'radio\' && c.ui != \'checkbox\'">\r\n\t\t\t\t\t\t\t<input v-if="!c.tag || c.tag == \'input\'" debounce="200" type="{{getInputType(c)}}" class="value ui-widget-content" v-model="c.value"\r\n\t\t\t\t\t\t\t\t:step="c.step" :min="c.min" :max="c.max"\r\n\t\t\t\t\t\t\t\t@keyup.enter.stop="search"\r\n\t\t\t\t\t\t\t\t@change.stop="editCondition(\'value\', c)">\r\n\t\t\t\t\t\t\t<select v-if="c.tag == \'select\'" class="value ui-widget-content" v-model="c.value"\r\n\t\t\t\t\t\t\t\t@change.stop="editCondition(\'value\', c)">\r\n\t\t\t\t\t\t\t\t<option v-for="option in c.options" v-bind:value="option.hasOwnProperty(\'value\') ? option.value : option">\r\n\t\t\t\t\t\t\t\t\t{{ option.hasOwnProperty(\'value\') ? option.text : option }}\r\n\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t  </template>\r\n\t\t\t\t\t\t\x3c!-- in 或单选多选框 --\x3e\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<label v-if="c.ui == \'checkbox\' || c.ui == \'radio\'" v-for="option in c.options">\r\n\t\t\t\t\t\t\t\t<input type="{{getInputType(c)}}" name="{{c.id}}_{{instanceId}}" v-model="c.value" \r\n\t\t\t\t\t\t\t\t\tvalue="{{option.hasOwnProperty(\'value\') ? option.value : option}}"\r\n\t\t\t\t\t\t\t\t\tclass="ui-widget-content" style="width:auto;min-width:auto;" :style="c.style"\r\n\t\t\t\t\t\t\t\t\t@change.stop="editCondition(\'value\', c)">\r\n\t\t\t\t\t\t\t\t<span>{{option.hasOwnProperty(\'text\') ? option.text : option}}</span>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<select v-if="c.tag == \'select\'" multiple class="value ui-widget-content" v-model="c.value"\r\n\t\t\t\t\t\t\t\t@change.stop="editCondition(\'value\', c)" style="overflow:auto;height:auto" :style="c.style">\r\n\t\t\t\t\t\t\t\t<option v-for="option in c.options" v-bind:value="option.hasOwnProperty(\'value\') ? option.value : option">\r\n\t\t\t\t\t\t\t\t\t{{option.hasOwnProperty(\'text\') ? option.text : option}}\r\n\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t  </template>\r\n\t\t\t\t  </template>\r\n\t\t\t\t\t\x3c!-- 双值条件：[]、(]、[)、() --\x3e\r\n\t\t\t\t\t<template v-if="c.diadic">\r\n\t\t\t\t\t\t<div class="left">\r\n\t\t\t\t\t\t\t<input v-if="!c.tag || c.tag == \'input\'" debounce="200" type="{{getInputType(c)}}" class="value ui-widget-content" v-model="c.value[0]"\r\n\t\t\t\t\t\t\t\t:step="c.step" :min="c.min" :max="c.max"\r\n\t\t\t\t\t\t\t\t@keyup.enter.stop="search"\r\n\t\t\t\t\t\t\t\t@change.stop="editCondition(\'value\', c)">\r\n\t\t\t\t\t\t\t<select v-if="c.tag == \'select\'" class="value ui-widget-content" v-model="c.value[0]"\r\n\t\t\t\t\t\t\t\t@change.stop="editCondition(\'value\', c)">\r\n\t\t\t\t\t\t\t\t<option v-for="option in c.options" v-bind:value="option.hasOwnProperty(\'value\') ? option.value : option">\r\n\t\t\t\t\t\t\t\t\t{{ option.hasOwnProperty(\'value\') ? option.text : option }}\r\n\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class="center">～</div>\r\n\t\t\t\t\t\t<div class="right">\r\n\t\t\t\t\t\t\t<input v-if="!c.tag || c.tag == \'input\'" debounce="200" type="{{getInputType(c)}}" class="value ui-widget-content" v-model="c.value[1]"\r\n\t\t\t\t\t\t\t\t:step="c.step" :min="c.min" :max="c.max"\r\n\t\t\t\t\t\t\t\t@keyup.enter.stop="search"\r\n\t\t\t\t\t\t\t\t@change.stop="editCondition(\'value\', c)">\r\n\t\t\t\t\t\t\t<select v-if="c.tag == \'select\'" class="value ui-widget-content" v-model="c.value[1]"\r\n\t\t\t\t\t\t\t\t@change.stop="editCondition(\'value\', c)">\r\n\t\t\t\t\t\t\t\t<option v-for="option in c.options" v-bind:value="option.hasOwnProperty(\'value\') ? option.value : option">\r\n\t\t\t\t\t\t\t\t\t{{ option.hasOwnProperty(\'value\') ? option.text : option }}\r\n\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</div>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t\t<div class="operate ui-widget-content">\r\n\t\t\t<button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary" type="button" @click.stop="search">\r\n\t\t\t\t<span class="ui-button-icon-primary ui-icon ui-icon-search"></span>\r\n\t\t\t\t<span class="ui-button-text">查询</span>\r\n\t\t\t</button>\r\n\t\t\t<button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary" type="button" @click.stop="clearCondition">\r\n\t\t\t\t<span class="ui-button-icon-primary ui-icon ui-icon-minus"></span>\r\n\t\t\t\t<span class="ui-button-text">清空</span>\r\n\t\t\t</button>\r\n\t\t\t<button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary" type="button" @click.stop="showAdvance = false">\r\n\t\t\t\t<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span>\r\n\t\t\t\t<span class="ui-button-text">关闭</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t\t<table cellspacing="0" cellpadding="0" style="display:none">\r\n\t\t\t<tbody>\r\n\t\t\t\t<tr v-for="c in displayConditions" class="condition">\r\n\t\t\t\t\t<td class="ui-widget-content">\r\n\t\t\t\t\t\t<select class="id ui-widget-content" v-model="c.id" @change.stop="editCondition(\'id\', c)">\r\n\t\t\t\t\t\t\t<option v-for="cfg in advanceConfig.options" :value="cfg.id">{{cfg.label}}</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td class="ui-widget-content" style="max-width:7em">\r\n\t\t\t\t\t\t<select class="operator ui-widget-content" v-model="c.operator" @change.stop="editCondition(\'operator\', c)">\r\n\t\t\t\t\t\t\t<option v-for="o in operators(c.id)" :value="o.id">{{o.label}}</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td class="ui-widget-content">\r\n\t\t\t\t\t\t<input v-if="!c.tag || c.tag == \'input\'" debounce="200" type="{{getInputType(c)}}" class="value ui-widget-content" v-model="c.value"\r\n\t\t\t\t\t\t\t:step="c.step" :min="c.min" :max="c.max"\r\n\t\t\t\t\t\t\t@keyup.enter.stop="search"\r\n\t\t\t\t\t\t\t@change.stop="editCondition(\'value\', c)">\r\n\t\t\t\t\t\t<select v-if="c.tag == \'select\'" class="value ui-widget-content" v-model="c.value"\r\n\t\t\t\t\t\t\t@change.stop="editCondition(\'value\', c)">\r\n\t\t\t\t\t\t\t<option v-for="option in c.options" v-bind:value="option.hasOwnProperty(\'value\') ? option.value : option">\r\n\t\t\t\t\t\t\t\t{{ option.hasOwnProperty(\'value\') ? option.text : option }}\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td class="ui-widget-content">\r\n\t\t\t\t\t\t<span @click.stop="deleteCondition($index)" class="delete ui-icon ui-icon-minusthick" title="移除此条件"></span>\r\n\t\t\t\t\t\t<span @click.stop="c.value = \'\'" class="clear ui-icon ui-icon-cancel" title="清空条件值"></span>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr class="operate">\r\n\t\t\t\t\t<td class="ui-widget-content" colspan="4">\r\n\t\t\t\t\t\t<button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary" type="button" @click.stop="search">\r\n\t\t\t\t\t\t\t<span class="ui-button-icon-primary ui-icon ui-icon-search"></span>\r\n\t\t\t\t\t\t\t<span class="ui-button-text">查询</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary" type="button" @click.stop="clearCondition">\r\n\t\t\t\t\t\t\t<span class="ui-button-icon-primary ui-icon ui-icon-minus"></span>\r\n\t\t\t\t\t\t\t<span class="ui-button-text">清空</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary" type="button" @click.stop="addCondition">\r\n\t\t\t\t\t\t\t<span class="ui-button-icon-primary ui-icon ui-icon-plus"></span>\r\n\t\t\t\t\t\t\t<span class="ui-button-text">添加</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary" type="button" @click.stop="showAdvance = false">\r\n\t\t\t\t\t\t\t<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span>\r\n\t\t\t\t\t\t\t<span class="ui-button-text">关闭</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t</tbody>\r\n\t\t</table>\r\n\t</div>\r\n</div>'}),define("css!bc/vue/search",[],function(){}),define("bc/vue/search",["vue","bc/vue/cors","text!bc/vue/search.html","css!bc/vue/search"],function(t,e,i){"use strict";function n(t){if(t.advanceConfig&&t.advanceConfig.options){t.displayConditions.length=0;var e;t.advanceConfig.options.forEach(function(i){if(i.diadic=function(t){return/(^\[\]$)|(^\[\)$)|(^\(\]$)|(^\(\)$)/.test(t)}(i.operator),i.multiValue="in"===i.operator,i.value=i.diadic||i.multiValue?[]:null,!0!==i.hidden){e={};for(var n in i)e[n]=i[n];t.displayConditions.push(e)}})}}return t.component("bc-search",{template:i,replace:!0,props:{placeholder:{type:String,required:!1},align:{type:String,required:!1,default:"left"},quick:{type:Boolean,required:!1,default:!1},value:{type:String,required:!1,default:""},advanceValue:{type:Array,required:!1},mixValue:{type:Array,required:!1},advanceConfig:{type:[String,Array,Object],required:!1,default:null}},data:function(){return{instanceId:Date.now(),displayConditions:[],showAdvance:!1}},computed:{advanceStyle:function(){return this.advanceConfig?{maxHeight:this.advanceConfig.maxHeight,height:this.advanceConfig.height,width:this.advanceConfig.width,maxWidth:this.advanceConfig.maxWidth}:null},fuzzyValueObj:function(){return null!==this.value&&""!==this.value?["fuzzy",this.value]:null},advanceValue_:function(){if(!this.advanceConfig)return null;var t,e,i=[];return this.displayConditions.forEach(function(n){n.diadic?(e=[],""!==n.value[0]&&null!==n.value[0]&&void 0!==n.value[0]&&(e[0]=n.value[0]),""!==n.value[1]&&null!==n.value[1]&&void 0!==n.value[1]&&(e[1]=n.value[1]),e.length||(e=null)):e=Array.isArray(n.value)?0===n.value.length?null:n.value:null===n.value||""===n.value?null:n.value+"",n.id&&e&&(t=[n.id,e],n.type&&t.push(n.type),n.operator&&(n.type||t.push(null),t.push(n.operator)),i.push(t))}),i.length?i:null},advanceValueStr:function(){return this.advanceValue_?JSON.stringify(this.advanceValue_):this.advanceValue_},mixValue_:function(){return this.advanceValue_?this.fuzzyValueObj?[].concat(this.advanceValue_,[this.fuzzyValueObj]):[].concat(this.advanceValue_):this.fuzzyValueObj?[this.fuzzyValueObj]:null}},created:function(){this.$watch("value",function(t,e){this.change()}),"string"==typeof this.advanceConfig?(this.advanceConfig={url:this.advanceConfig},this.hasAdvance=!0):Array.isArray(this.advanceConfig)?(this.advanceConfig={options:this.advanceConfig},this.hasAdvance=!0):"[object Object]"===Object.prototype.toString.call(this.advanceConfig)?this.hasAdvance=!0:(this.advanceConfig=null,this.hasAdvance=!1),n(this)},watch:{advanceValueStr:function(t,e){this.change()}},ready:function(){$(this.$el).on({mouseover:function(){$(this).addClass("ui-state-hover")},mouseout:function(){$(this).removeClass("ui-state-hover")}},".operate button")},destroyed:function(){console.log("[search] destroyed"),$(this.$el).off()},methods:{toggleAdvance:function(){var t=this;this.advanceConfig.loading||(this.advanceConfig.options?this.showAdvance=!this.showAdvance:this.advanceConfig.url?(t.advanceConfig.loading=!0,fetch(this.advanceConfig.url,e.autoCorsSettings(this.advanceConfig.url,{headers:{"Content-Type":"application/json;charset=utf-8"}})).then(function(t){return t.ok?t.json():t.text().then(function(t){throw new Error(t)})}).then(function(e){Array.isArray(e)?(t.advanceConfig.options=e,n(t),t.showAdvance=!0):alert("高级搜索异步返回值不是数组格式！options=%s"+JSON.stringify(e)),t.advanceConfig.loading=!1}).catch(function(e){console.log("[grid] reload error: url=%s, error=%o",t.url,e);var i=e.message||"加载高级搜索配置失败！";window.bc&&bc.msg?bc.msg.alert(i):alert(i),t.advanceConfig.loading=!1})):alert("缺少高级搜索的 advanceConfig.url 属性配置"))},change:function(){this.mixValue=this.mixValue_,this.advanceValue=this.advanceValue_,this.$dispatch("change",this.value,this.advanceValue,this.mixValue),this.quick&&this.$dispatch("search",this.value,this.advanceValue,this.mixValue)},search:function(){this.$dispatch("search",this.value,this.advanceValue_,this.mixValue_)},operators:function(t){var e=[{id:"=",label:"等于"},{id:">=",label:"大于等于"},{id:"<=",label:"小于等于"},{id:">",label:"大于"},{id:"<",label:"小于"},{id:"!=",label:"不等于"}],i=this.getConditionConfig(t);return i&&i.type&&"string"!=i.type||e.push({id:"@",label:"包含"}),e},addCondition:function(){this.displayConditions.push({id:null,operator:"=",value:null,type:null})},deleteCondition:function(t){this.displayConditions.splice(t,1),this.displayConditions.length||(this.showAdvance=!1)},clearCondition:function(){this.displayConditions.forEach(function(t){t.value=t.diadic?[]:null})},getConditionConfig:function(t){if(this.advanceConfig)for(var e=0;e<this.advanceConfig.length;e++)if(this.advanceConfig[e].id==t)return this.advanceConfig[e];return null},editCondition:function(t,e){if("id"==t){e.value=null;var i=this.getConditionConfig(e.id);e.type=i.type}},getInputType:function(t){return t.ui||t.type||"text"}}})}),define("css!bc/vue/toolbar",[],function(){}),define("bc/vue/toolbar",["vue","css!bc/vue/toolbar"],function(t){"use strict";return t.component("bc-toolbar",{template:'<div class="bc-vue-toolbar ui-widget-content"><slot></slot></div>',replace:!0,props:{}})}),define("text!bc/vue/box-pointer.html",[],function(){return'<div class="bc-box-pointer left-top" :style="{display: hidden ? \'none\' : \'block\'}">\r\n\t<s class="pointer-border ui-widget ui-state-highlight">\r\n\t</s>\r\n\t<s class="pointer-back ui-widget ui-state-highlight"></s>\r\n\t<div class="box ui-widget ui-state-highlight ui-corner-all" :style="{width: width}">\r\n\t\t<div class="content">\r\n\t\t\t<slot></slot>\r\n\t\t</div>\r\n\t\t<s class="close ui-state-default ui-corner-all" :class="closeClass"\r\n\t\t\t@click.prevent.stop="close"\r\n\t\t\t@mouseover.prevent.stop="closeClass = \'ui-state-hover\'"\r\n\t\t\t@mouseout.prevent.stop="closeClass = \'\'">\r\n\t\t\t<span class="ui-icon ui-icon-closethick"></span>\r\n\t\t</s>\r\n\t</div>\r\n</div>'}),define("css!bc/vue/box-pointer",[],function(){}),define("bc/vue/box-pointer",["vue","text!bc/vue/box-pointer.html","css!bc/vue/box-pointer"],function(t,e){"use strict";return t.component("bc-box-pointer",{template:e,replace:!0,props:{hidden:{type:Boolean,required:!1,default:!0},width:{type:String,required:!1,default:"auto"}},data:function(){return{closeClass:""}},methods:{close:function(){this.hidden=!0,this.$dispatch("closed")}}})}),define("css!bc/vue/loading",[],function(){}),define("bc/vue/loading",["vue","css!bc/vue/loading"],function(t){"use strict";return t.component("bc-loading",{template:'<div class="bc-vue-loading-container ui-overlay"><div v-if="maskable" class="mask ui-widget-overlay"></div><div class="actor ui-state-active"'+" :style=\"{'width': size, 'height': size, 'animation-duration': speed, 'margin-top': 'calc('+ size + ' / -2)', 'margin-left': 'calc('+ size + ' / -2)'}\" :class=\"{transparent: transparent}\"></div><div v-if=\"countable\" class=\"counter ui-state-disabled\">{{minutes_}} : {{seconds_}}</div></div>",replace:!0,props:{size:{type:String,required:!1,default:"4.5em"},speed:{type:String,required:!1,default:"1s"},maskable:{type:Boolean,required:!1,default:!0},countable:{type:Boolean,required:!1,default:!1},transparent:{type:Boolean,required:!1,default:!0}},data:function(){return{counter:0,minutes:0,seconds:0}},computed:{minutes_:function(){return this.minutes<10?"0"+this.minutes:""+this.minutes},seconds_:function(){return this.seconds<10?"0"+this.seconds:""+this.seconds}},ready:function(){var t=this;setInterval(function(){t.seconds++,11==t.seconds&&(t.seconds=0,t.minutes++,11==t.minutes&&(t.minutes=0))},1e3)},methods:{reset:function(){this.minutes=0,this.seconds=0}}})}),define("bc/vue/table-col",["vue"],function(t){"use strict";return t.component("bc-table-col",{template1:'<colgroup data-rowspan={{rowspan}}><col v-if="addSn" data-id="_sn" style="width:3em"><col v-for="c in columns" data-id="{{c.id}}" :style="{width:c.width}"><col v-if="addEmpty" data-id="_empty" style="width:auto;min-width:1em;"></colgroup>',template:'<colgroup v-if="addSn" data-id="_sn" style="width:3em"></colgroup><colgroup v-for="c in columns" data-id="{{c.id}}" :style="{width:c.width}" span="{{c.children ? c.children.length || 1 : 1}}"><col v-if="c.children" v-for="d in c.children" data-id="{{d.id}}" :style="{width:d.width}"></colgroup><colgroup v-if="addEmpty" data-id="_empty" style="width:auto;min-width:1em;"></colgroup>',replace:!0,props:{columns:{type:Array,required:!0},addSn:{type:Boolean,required:!1,default:!1},addEmpty:{type:Boolean,required:!1,default:!1}},computed:{rowspan:function(){for(var t=1,e=0;e<this.columns.length;e++)if(this.columns[e].children&&this.columns[e].children.length){t=2;break}return t}}})}),define("text!bc/vue/page-bar.html",[],function(){return'<ul class="bc-page-bar ui-widget-content ui-widget ui-helper-clearfix">\r\n\t<li v-if="refreshable" class="icon ui-state-default ui-corner-all" title="刷新" @click="this.$dispatch(\'change\', \'clickRefresh\', this.pageNo, this.pageSize)">\r\n\t\t<span class="ui-icon ui-icon-refresh"></span>\r\n\t</li>\r\n\t<template v-if="pageable">\r\n\t\t<li class="icons ui-state-default ui-corner-all">\r\n\t\t\t<a href="#" class="icon ui-state-default ui-corner-all" @click.prevent.stop="toPage(1)">\r\n\t\t\t\t<span class="ui-icon ui-icon-seek-first" title="首页"></span>\r\n\t\t\t</a>\r\n\t\t\t<a href="#" class="icon ui-state-default ui-corner-all" @click.prevent.stop="toPage(Math.max((this.pageNo || 1) - 1, 1))">\r\n\t\t\t\t<span class="ui-icon ui-icon-seek-prev" title="上一页"></span>\r\n\t\t\t</a>\r\n\t\t\t<span class="pageNo">\r\n\t\t\t\t<span>{{pageNo || 1}}</span>/<span>{{pageCount}}</span>(<span>{{count}}</span>)\r\n\t\t\t</span>\r\n\t\t\t<a href="#" class="icon ui-state-default ui-corner-all" @click.prevent.stop="toPage(Math.min((this.pageNo || 1) + 1, this.pageCount))">\r\n\t\t\t\t<span class="ui-icon ui-icon-seek-next" title="下一页"></span>\r\n\t\t\t</a>\r\n\t\t\t<a href="#" class="icon ui-state-default ui-corner-all" @click.prevent.stop="toPage(this.pageCount)">\r\n\t\t\t\t<span class="ui-icon ui-icon-seek-end" title="尾页"></span>\r\n\t\t\t</a>\r\n\t\t</li>\r\n\t\t<li class="icons ui-state-default ui-corner-all" title="每页显示的数量">\r\n\t\t\t<a href="#" v-for="s in pageSizes" class="icon ui-state-default ui-corner-all" :class="{\'ui-state-active\': _pageSize == s}" @click.prevent.stop="changePageSize(s)">\r\n\t\t\t\t<span class="pageSize">{{s}}</span>\r\n\t\t\t</a>\r\n\t\t</li>\r\n\t</template>\r\n\t\x3c!-- 扩展按钮 --\x3e\r\n\t<slot></slot>\r\n</ul>'}),define("css!bc/vue/page-bar",[],function(){}),define("text!bc/vue/page-bar-importer.html",[],function(){return'<li class="bc-page-bar-importer icon ui-state-default ui-corner-all" :title="title">\r\n\t<span class="ui-icon" :class="iconClass" @click="hidden = !hidden"></span>\r\n\t<bc-box-pointer :width.sync="width" :hidden.sync="hidden" title="" @closed="reset">\r\n\t\t<form name="importer" method="post" \r\n\t\t\t@dragenter.prevent.stop="dragging = true" \r\n\t\t\t@dragover.prevent.stop="dragging = true" \r\n\t\t\t@dragleave.prevent.stop="dragging = false" \r\n\t\t\t@drop.prevent.stop="drop($event)">\r\n\t\t\t<div class="info">\r\n\t\t\t\t导入数据前请确保数据文件符合模板格式，可以通过下载模板获知格式的详细要求！\r\n\t\t\t</div>\r\n\t\t\t<div class="buttons">\r\n\t\t\t\t\x3c!-- 上传数据 --\x3e\r\n\t\t\t\t<label class="button upload">上传数据\r\n\t\t\t\t\t<input type="file" name="upload" @change.prevent.stop="upload($event.target.files[0])" \r\n\t\t\t\t\t  :accept="accept" style="display: none">\r\n\t\t\t\t</label>\r\n\t\t\t\t\x3c!-- 下载模板 --\x3e\r\n\t\t\t\t<a href="#" class="button download" @click.prevent.stop="download">下载模板</a>\r\n\t\t\t\t\x3c!-- 取消 --\x3e\r\n\t\t\t\t<a href="#" class="button cancel" @click.prevent.stop="hidden = !hidden">取消</a>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t\t<div v-if="processing" class="processing ui-state-highlight">\r\n\t\t\t<div v-if="!loading" style="margin:auto">\r\n\t\t\t\t{{resultSubject}}\r\n\t\t\t\t<template v-if="result.errorCount">\r\n\t\t\t\t\t<br><a href="#" class="show-result-detail" @click="showResultDetail">点击查看详情</a>\r\n\t\t\t\t</template>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\x3c!-- 上传进度显示 --\x3e\r\n\t\t<bc-loading v-if="loading" v-ref:loader :countable="true" :transparent="false"\r\n\t\t  :maskable="true" size="5em" speed="1000ms">\r\n\t\t</bc-loading>\r\n\t</bc-box-pointer>\r\n</li>'}),define("css!bc/vue/page-bar-importer",[],function(){}),define("bc/vue/page-bar-importer",["jquery","vue","bc/vue/cors","text!bc/vue/page-bar-importer.html","css!bc/vue/page-bar-importer","bc/vue/box-pointer","bc/vue/loading"],function(t,e,i,n){"use strict";return e.component("bc-page-bar-importer",{template:n,replace:!0,props:{title:{type:String,required:!1,default:"导入"},iconClass:{type:String,required:!1,default:"ui-icon-arrowthickstop-1-n"},hidden:{type:Boolean,required:!1,default:!0},showResult:{type:Boolean,required:!1,default:!0},width:{type:String,required:!1,default:"auto"},accept:{type:String,required:!1,default:""},url:{type:String,required:!1,default:null},tplUrl:{type:String,required:!1,default:null},tplFilename:{type:String,required:!1,default:null}},data:function(){return{fileEl:null,processing:!1,loading:!1,catching:!1,dragging:!1,result:{}}},ready:function(){this.fileEl=this.$el.querySelector("input[name=upload]")},computed:{resultSubject:function(){if(this.catching)return"服务器异常！";let t,e=this.result;return e.errorCount?(t=`总共 ${e.totalCount} 条数据，有 ${e.errorCount} 条数据因存在异常导致导入失败`,e.ignoreCount?t+=`，有 ${e.ignoreCount} 条数据因重复而被忽略。`:t+="。"):(t=`成功导入 ${e.successCount} 条数据`,e.ignoreCount?t+=`，有 ${e.ignoreCount} 条数据因重复被忽略。`:t+="。"),t}},methods:{reset:function(){this.fileEl.value="",this.hidden=!0,this.processing=!1,this.loading=!1,this.catching=!1,this.dragging=!1,this.result={}},drop:function(t){this.dragging=!1,this.upload(t.dataTransfer.files[0])},upload:function(t){if(!t)return;this.processing=this.loading=!0;let e=this.url||this.$parent.url+"/import";fetch(e,i.autoCorsSettings(e,{method:"POST",headers:{"Content-Type":"application/octet-stream","Content-Disposition":'attachment; filename="'+encodeURIComponent(t.name)+'"'},body:t})).then(t=>t.ok?t.json():t.text().then(function(t){throw new Error(t)})).then(t=>{this.loading=!1,this.result=t,this.$dispatch("imported",!0,t)}).catch(t=>{if(this.loading=!1,this.$dispatch("imported",!1,t.message,t),this.showResult){var e=t.message||"导入失败！";window.bc&&bc.msg?bc.msg.alert(e,"导入异常"):alert(e)}this.reset()})},download:function(){let t=this.tplUrl||this.url||this.$parent.url+"/import";i.download(t,this.tplFilename)},showResultDetail:function(){let t=this.result,e=window.open("","showImportedResult"),i=e.document;i.open();let n=[];n.push("<!DOCTYPE html>"),n.push("<html>"),n.push("<head>"),n.push('<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>'),n.push("<title>数据导入异常列表</title>"),n.push('<style type="text/css">'),n.push("body>h2{margin:0.25em 0}"),n.push("div{color:red;font-weight:bold;font-size:100%}"),n.push("table{border:none;border-collapse:collapse}"),n.push("thead{font-weight:bold;}"),n.push("td{border:1px solid gray;padding:2px;}"),n.push("td:nth-child(1),td:nth-child(2){color:red;font-weight:bold;}"),n.push("td:nth-child(2){max-width:600px;}"),n.push("</style>"),n.push("</head>"),n.push("<body>"),n.push("<h2>数据导入异常列表</h2>"),n.push("<div>"+this.resultSubject+"</div>"),n.push("<table>");let r=t.columnNames;n.push("<thead><tr>"),n.push("<td>行号</td><td>异常信息</td>");for(let t=0;t<r.length;t++)n.push("<td>"+r[t]+"</td>");n.push("</tr></thead>"),n.push("<tbody>");let o,a,s,l=t.errors;for(let t=0;t<l.length;t++){o=l[t],n.push("<tr>"),n.push("<td>"+(o.index+1)+"</td>"),n.push("<td>"+o.msg+"</td>"),a=o.source;for(let t=0;t<a.length;t++)s=a[t],n.push("<td>"+(0==s||s?s:"")+"</td>");n.push("</tr>")}return n.push("</tbody></table>"),n.push("</body>"),n.push("</html>"),i.write(n.join("")),i.close(),e.focus(),!1}}})}),define("text!bc/vue/page-bar-exporter.html",[],function(){return'<li class="bc-page-bar-exporter icon ui-state-default ui-corner-all" :title="title">\r\n\t<span class="ui-icon" :class="iconClass" @click="hidden = !hidden"></span>\r\n\t<bc-box-pointer :width.sync="width" :hidden.sync="hidden" title="" @closed="reset">\r\n\t\t<div class="info" :class="serverError ? \'ui-state-error\' : \'\'"><div>{{{tip}}}</div></div>\r\n\t\t<div class="buttons" v-if="!outOfLimit && !loading && !serverError">\r\n\t\t\t\x3c!-- 继续 --\x3e\r\n\t\t\t<a href="#" class="button continue" @click.prevent.stop="export">继续</a>\r\n\t\t\t\x3c!-- 取消 --\x3e\r\n\t\t\t<a href="#" class="button cancel" @click.prevent.stop="hidden = true">取消</a>\r\n\t\t</div>\r\n\t\t\x3c!-- 进度显示 --\x3e\r\n\t\t<bc-loading v-if="loading" size="5em" speed="1000ms" :countable="true" :transparent="true" :maskable="false">\r\n\t\t</bc-loading>\r\n\t</bc-box-pointer>\r\n</li>'}),define("css!bc/vue/page-bar-exporter",[],function(){}),define("bc/vue/page-bar-exporter",["jquery","vue","bc/vue/cors","text!bc/vue/page-bar-exporter.html","css!bc/vue/page-bar-exporter","bc/vue/box-pointer","bc/vue/loading"],function(t,e,i,n){"use strict";return e.component("bc-page-bar-exporter",{template:n,replace:!0,props:{url:{type:String,required:!1,default:null},max:{type:Number,required:!1,default:3500},filename:{type:String,required:!1,default:null},title:{type:String,required:!1,default:"导出"},iconClass:{type:String,required:!1,default:"ui-icon-arrowthickstop-1-s"},width:{type:String,required:!1,default:"auto"},unEncode:{type:Boolean,required:!1,default:!1}},data:function(){return{hidden:!0,loading:!1,serverError:null}},computed:{outOfLimit:function(){return this.max>0&&this.$parent.count>this.max},tip:function(){if(this.serverError)return this.serverError;if(this.loading)return"导出中...";if(this.max>0){let t=this.$parent;if(t.count>this.max)return`系统限制每次最多导出 ${this.max} 条数据，当前共有 ${t.count} 条数据，\n\t\t\t\t\t  已超出限制，无法导出。请先通过条件搜索减少导出数据的条目数！`}return"导出数据可能耗时较长，需要耐心等待！"}},methods:{reset:function(){this.hidden=!0,this.loading=!1,this.serverError=null},export:function(){let t=this.$parent,e={};if(t.query)if(Array.isArray(t.query))e[t.queryKey]=JSON.stringify(t.query);else if("object"==typeof t.query){let i=t.query;Object.keys(i).forEach(function(t){let n=i[t];null!==n&&""!==n&&"undefined"!==typeof n&&(e[t]=n)})}else"string"==typeof t.query&&(e[t.queryKey]=t.query);let n=i.appendUrlParams(this.url||t.url+"/export",e,this.unEncode);this.loading=!0,i.download(n,this.filename).then(()=>this.reset()).catch(t=>{this.loading=!1,this.serverError="导出失败：<br>"+t.message})}}})}),define("bc/vue/page-bar",["jquery","vue","text!bc/vue/page-bar.html","css!bc/vue/page-bar","bc/vue/page-bar-importer","bc/vue/page-bar-exporter"],function(t,e,i){"use strict";var n=[25,50,100];return e.component("bc-page-bar",{template:i,replace:!0,props:{pageable:{type:Boolean,required:!1,default:!1},pageNo:{type:Number,required:!1},pageSize:{type:Number,required:!1},pageSizes:{type:Array,required:!1,default:function(){return n}},count:{type:Number,required:!1,default:0},refreshable:{type:Boolean,required:!1,default:!0},exportable:{type:Boolean,required:!1,default:!1},importable:{type:Boolean,required:!1,default:!1}},data:function(){return{pageCount:Math.ceil(this.count/(this.pageSize||n[0]))}},computed:{_pageNo:function(){return!this.pageNo||this.pageNo<=0?1:this.pageNo},_pageSize:function(){return this.pageSize||n[0]}},ready:function(){t(this.$el).on({mouseover:function(){t(this).addClass("ui-state-hover")},mouseout:function(){t(this).removeClass("ui-state-hover")}},".icon")},beforeDestroy:function(){t(this.$el).off()},watch:{count:function(t,e){this.pageCount=Math.ceil(t/(this.pageSize||n[0]))}},methods:{toPage:function(t){(t=Math.max(1,t)||1)!=this._pageNo&&(this.pageNo=t,this.$dispatch("change","changePageNo",this.pageNo,this.pageSize))},changePageSize:function(t){t!=this._pageSize&&(this.pageNo=Math.floor((this._pageNo-1)*this._pageSize/t+1),this.pageSize=t,this.pageCount=Math.ceil(this.count/this.pageSize),this.$dispatch("change","changePageSize",this.pageNo,this.pageSize))}}})}),define("text!bc/vue/grid.html",[],function(){return'<div class="bc-vue-grid ui-widget-content">\r\n\t\x3c!-- 顶部扩展区 --\x3e\r\n\t<slot name="top"></slot>\r\n\r\n\t\x3c!-- 表头 --\x3e\r\n\t<table class="head" :style="{width:\'100%\',position:\'relative\',\'user-select\':\'initial\',left:v.scrollLeft + \'px\'}">\r\n\t\t<colgroup v-ref:cols is="bc-table-col" :columns="columns" :add-sn="true" :add-empty="true">\r\n\t\t</colgroup>\r\n\t\t<thead>\r\n\t\t\t<tr class="main head ui-widget-content">\r\n\t\t\t\t<th rowspan="{{headRowspan}}" data-id="_sn" class="sn"><input type="checkbox" v-if="!singleChoice" v-model="v.selectAll" title="{{v.selectAll ? \'点击全部不选择\' : \'点击选择全部\'}}" @change.stop></th>\r\n\t\t\t\t<th v-for="c in columns" class="cell text" :class="c.headCellClass" :style="c.headCellStyle" data-id="{{c.id}}" colspan="{{c.children && c.children.length > 0 ? c.children.length : 1}}" rowspan="{{c.children && c.children.length > 0 ? 1 : headRowspan}}">{{c.label}}</th>\r\n\t\t\t\t<th rowspan="{{headRowspan}}" data-id="_empty" class="empty"></th>\r\n\t\t\t</tr>\r\n\t\t\t\x3c!-- 分组的表头 --\x3e\r\n\t\t\t<tr class="sub head ui-widget-content" v-if="headRowspan > 1">\r\n\t\t\t\t<template v-for="c in columns | filterBy isGroupColumn">\r\n\t\t\t\t\t<th v-for="d in c.children" class="cell text" data-id="{{d.id}}">{{d.label}}</th>\r\n\t\t\t\t</template>\r\n\t\t\t</tr>\r\n\t\t</thead>\r\n\t</table>\r\n\r\n\t\x3c!-- 数据 --\x3e\r\n\t<div class="rows" :style="{overflow:\'auto\',\'user-select\':\'initial\'}" @scroll="v.scrollLeft = -1 * $event.target.scrollLeft">\r\n\t\t<table class="rows" style="width:100%">\r\n\t\t\t<colgroup is="bc-table-col" :columns="columns" :add-sn="true" :add-empty="true"></colgroup>\r\n\t\t\t<tbody>\r\n\t\t\t\t<tr class="row" v-for="r in rows" data-id="{{r.id}}" class="{{r.class}}" :class="{\'ui-state-highlight\': r.selected, \'ui-widget-content\': true}"\r\n\t\t\t\t    :style="(typeof rowStyle == \'function\') ? rowStyle(r) : rowStyle">\r\n\t\t\t\t\t<td class="sn" data-id="_sn"><span v-if="r.selected" class="ui-icon ui-icon-check"></span>{{$index + 1}}</td>\r\n\t\t\t\t\t<template v-for="c in columns">\r\n\t\t\t\t\t\t<td v-if="isGroupColumn(c)" v-for="d in c.children" class="cell text"\r\n\t\t\t\t\t\t    :class="(typeof d.rowCellClass == \'function\') ? d.rowCellClass(r[d.id], r, d) : d.rowCellClass"\r\n\t\t\t\t\t\t    :style="(typeof d.rowCellStyle == \'function\') ? d.rowCellStyle(r[d.id], r, d) : d.rowCellStyle"\r\n\t\t\t\t\t\t    @click.prevent="rowCellClick(r[d.id], r, d, $event)" :title="rowCellTitle(r[d.id], r, d)">\r\n\t\t\t\t\t\t\t<template v-if="d.escape !== false">{{rowCellFilter(r[d.id], r, d)}}</template>\r\n\t\t\t\t\t\t\t<template v-if="d.escape === false">{{{rowCellFilter(r[d.id], r, d)}}}</template>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td v-if="!isGroupColumn(c)" class="cell text"\r\n\t\t\t\t\t\t    :class="(typeof c.rowCellClass == \'function\') ? c.rowCellClass(r[c.id], r, c) : c.rowCellClass"\r\n\t\t\t\t\t\t    :style="(typeof c.rowCellStyle == \'function\') ? c.rowCellStyle(r[c.id], r, c) : c.rowCellStyle"\r\n\t\t\t\t\t\t    @click.prevent="rowCellClick(r[c.id], r, c, $event)" :title="rowCellTitle(r[c.id], r, c)">\r\n\t\t\t\t\t\t\t<template v-if="c.escape !== false">{{rowCellFilter(r[c.id], r, c)}}</template>\r\n\t\t\t\t\t\t\t<template v-if="c.escape === false">{{{rowCellFilter(r[c.id], r, c)}}}</template>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<td class="empty" data-id="_empty"></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</tbody>\r\n\t\t</table>\r\n\t</div>\r\n\r\n\t\x3c!-- 分页条 --\x3e\r\n\t<bc-page-bar v-if="showPageBar" style="border-width: 1px 0 0 0" :pageable="pageable" :page-no.sync="pageNo" \r\n\t\t:page-size.sync="pageSize" :page-sizes.sync="pageSizes" :count.sync="count" :refreshable="refreshable"\r\n\t\t:exportable="exportable" :importable="importable" @change="reload">\r\n\t\t\x3c!-- 分页条扩展按钮 --\x3e\r\n\t\t<slot name="page-bar-button"></slot>\r\n\t</bc-page-bar>\r\n\r\n\t\x3c!-- 加载器 --\x3e\r\n\t<bc-loading v-ref:loading v-if="v.loading"></bc-loading>\r\n\r\n\t\x3c!-- 底部扩展区 --\x3e\r\n\t<slot name="bottom"></slot>\r\n</div>'}),define("css!bc/vue/grid",[],function(){}),define("bc/vue/grid",["vue","bc/vue/cors","bc/vue/table-col","bc/vue/page-bar","text!bc/vue/grid.html","css!bc/vue/grid","bc/vue/loading"],function(t,e,i,n,r){"use strict";var o,a=[25,50,100];return t.component("bc-grid",{template:r,replace:!0,props:{singleChoice:{type:Boolean,required:!1,default:!1},columns:{type:Array,required:!1,default:function(){return[]}},rows:{type:Array,required:!1,default:function(){return[]}},url:{type:String,required:!1},rowStyle:{type:Function,required:!1},query:{required:!1},queryKey:{type:String,required:!1,default:"query"},method:{type:[String,Function],required:!1},beforeReload:{type:Function,required:!1},error:{type:Function,required:!1},showPageBar:{type:Boolean,required:!1,default:!0},pageable:{type:Boolean,required:!1,default:!1},pageNo:{type:Number,required:!1},pageSize:{type:Number,required:!1},pageSizes:{type:Array,required:!1,default:function(){return a}},count:{type:Number,required:!1,default:0},refreshable:{type:Boolean,required:!1,default:!0},exportable:{type:Boolean,required:!1,default:!1},importable:{type:Boolean,required:!1,default:!1},cellFilter:{type:Function,required:!1},autoLoad:{type:Boolean,required:!1,default:!0}},computed:{selection:function(){if(!this.singleChoice){for(var t=[],e=0;e<this.rows.length;e++)this.rows[e].selected&&t.push(this.rows[e]);return t}for(e=0;e<this.rows.length;e++)if(this.rows[e].selected)return this.rows[e]},headRowspan:function(){return this.$refs.cols?this.$refs.cols.rowspan:1}},data:function(){return{v:{scrollLeft:0,loading:!1,selectAll:!1}}},watch:{"v.selectAll":function(t,e){var i=this;this.rows.forEach(function(e,n){e.hasOwnProperty("selected")?e.selected=t:i.$set("rows["+n+"].selected",t)})}},ready:function(){var t,e,i,n=this;$(this.$el).on({mouseover:function(){$(this).addClass("ui-state-hover")},mouseout:function(){$(this).removeClass("ui-state-hover")},click:function(){t&&clearTimeout(e),t=!0;var r=this.rowIndex;e=setTimeout(function(){if(t=!1,i)i=!1;else{if(n.singleChoice)for(var e=0;e<n.rows.length;e++)e!=r&&n.rows[e].selected&&(n.rows[e].selected=!1);n.rows[r].hasOwnProperty("selected")?n.rows[r].selected=!n.rows[r].selected:n.$set("rows["+r+"].selected",!0),t=!1}},200)},dblclick:function(){i=!0,n.$dispatch("dblclick-row",n.rows[this.rowIndex],this.rowIndex)}},"tr.row"),this.autoLoad&&this.reload()},methods:{changePageBar:function(t,e,i){this.reload()},reload:function(){if(this.url){this.v.loading=!0;var t={};if(this.pageable&&(this.pageNo&&(t.pageNo=this.pageNo),this.pageSize&&(t.pageSize=this.pageSize)),this.query)if(Array.isArray(this.query))t[this.queryKey]=JSON.stringify(this.query);else if("object"==typeof this.query){var i=this.query;Object.keys(i).forEach(function(e){var n=i[e];null!==n&&""!==n&&"undefined"!==typeof n&&(t[e]=n)})}else"string"==typeof this.query&&(t[this.queryKey]=this.query);var n=this,r=this.url,o={method:"function"==typeof this.method?this.method():this.method||"GET"};if("POST"==o.method)o.headers={"Content-Type":"application/json;charset=utf-8"},o.body=JSON.stringify(t);else if("GET"==o.method){var a=[];Object.keys(t).forEach(function(e){a.push(e+"="+t[e])}),a.length&&(r+="?"+a.join("&"))}this.beforeReload&&!1===this.beforeReload(o)?n.v.loading=!1:fetch(r,e.autoCorsSettings(r,o)).then(t=>{if(204===t.status)return null;let e=t.headers.get("Content-Type").startsWith("text/")?t.text():t.json();return t.ok?e:e.then(t=>{throw new Error(t)})}).then(t=>{Array.isArray(t)?n.$set("rows",t):(t.columns&&n.$set("columns",t.columns),t.rows&&n.$set("rows",t.rows),n.pageable&&(t.pageNo&&n.$set("pageNo",t.pageNo),t.pageSize&&n.$set("pageSize",t.pageSize),t.pageSizes&&n.$set("pageSizes",t.pageSizes),t.count&&n.$set("count",t.count)),n.showPageBar&&(t.hasOwnProperty("refreshable")&&n.$set("refreshable",t.refreshable),t.hasOwnProperty("exportable")&&n.$set("exportable",t.exportable),t.hasOwnProperty("importable")&&n.$set("importable",t.importable)),t.hasOwnProperty("singleChoice")&&n.$set("singleChoice",t.singleChoice)),n.$dispatch("after-reload",t),n.v.loading=!1}).catch(t=>{console.log("[grid] reload error: url=%s, reason=%o",n.url,t),n.v.loading=!1;let e=!0;if("function"==typeof this.error&&(e=!1!==this.error(t.message)),e){var i=t.message||"[grid] 数据加载失败！";window.bc&&bc.msg?bc.msg.alert(i):alert(i)}})}},isGroupColumn:function(t){return!(!t.children||!t.children.length)},rowCellFilter:function(e,i,n){if(!n.filter)return e;if("string"==typeof n.filter){var r=n.filter.split(" "),o=t.filter(r[0]);o||console.error("filter '%s' not found (column=%s)",r[0],n.id);var a=r.slice(1);return a.unshift(e),o.apply(this,a)}return"function"==typeof n.filter?n.filter.apply(this,[e,i,n]):void 0},rowCellTitle:function(t,e,i){if(i.title)return"function"==typeof i.title?i.title(t,e,i):t},rowCellClick:function(t,e,i,n){i.rowCellClick&&i.rowCellClick.apply(this,[t,e,i,n])},getExportForm:function(){return o||(o=$('<form name="bc-vue-grid-exporter" method="get" style="display:none"></form>')[0]),o}}})}),define("text!bc/vue/tree.html",[],function(){return'<div class="bc-vue-tree ui-widget-content">\r\n\t<div class="self" :class="{\'ui-state-hover\': hover, \'ui-state-focus\': selected}"\r\n\t\t@mouseenter="hover = true" @mouseleave="hover = false" @click="clickMe">\r\n\t\t<span class="indent" :style="{width: (depth * 16) + \'px\'}"></span>\r\n\t\t<span @click.stop="toggle" class="toggle ui-icon"\r\n\t\t\t:class="collapsed ? \'ui-icon-triangle-1-e\' : \'ui-icon-triangle-1-se\'"\r\n\t\t\t:style="{visibility: leaf ? \'hidden\' : \'visible\'}">\r\n\t\t</span>\r\n\t\t<span class="icon ui-icon {{iconClass}}"></span>\r\n\t\t<span class="label">{{label || id}}</span>\r\n\t</div>\r\n\t<div v-if="!leaf && !collapsed" class="children">\r\n\t\t<bc-tree v-for="item in items" :cfg_="item"/>\r\n\t</div>\r\n</div>'}),define("css!bc/vue/tree",[],function(){}),define("bc/vue/tree",["jquery","vue","bc/vue/cors","text!bc/vue/tree.html","css!bc/vue/tree","bc/vue/loading"],function(t,e,i,n){"use strict";function r(t){return t.$parent&&t.$parent.isNode?1+r(t.$parent):0}function o(t){let e=t.$parent;return e&&e.isNode?o(e):t}function a(t){if(!t)return null;let e="string"==typeof t.children;return t.isRootNode||e?e?t.children:null:a(t.$parent)}function s(t){return t?t.paramKey?t.paramKey:s(t.$parent):"pid"}function l(t){return t?t.converter?t.converter:l(t.$parent):null}return e.component("bc-tree",{name:"bc-tree",template:n,replace:!0,props:{id:{type:[String,Number],required:!1,default:null},label:{type:String,required:!1,default:null},collapsed:{type:Boolean,required:!1,default:!0},selected:{type:Boolean,required:!1,default:!1},icon:{type:String,required:!1,default:null},leaf:{type:Boolean,required:!1,default:!1},children:{type:[Array,String],required:!1,default:null},url:{type:String,required:!1,default:null},paramKey:{type:String,required:!1,default:null},converter:{type:Function,required:!1,default:null},cfg_:{type:[Object,String,Number],required:!1,default:void 0}},data:function(){return{isRootNode:!1,isNode:!0,loading:!1,hover:!1,items:[]}},computed:{depth:function(){return r(this)},iconClass:function(){return this.icon?this.icon:this.leaf?"ui-icon-document":!1===this.collapsed?"ui-icon-folder-open":"ui-icon-folder-collapsed"}},ready:function(){if(void 0!==this.cfg_){let t=this.convert(this.cfg_);if("object"!=typeof t)this.id=t;else for(let i in t)e.set(this,i,t[i])}this.isRootNode=!this.$parent||this.$parent&&!this.$parent.isNode,this.url&&(this.children=this.url);let t=o(this);this.selected&&e.set(t,"selectedNode",this),Array.isArray(this.children)?(this.items=this.children,this.isRootNode&&e.nextTick(()=>{this.$dispatch("initialized",t.selectedNode,"local"),t.selectedNode&&this.$dispatch("change",t.selectedNode,null)})):this.collapsed?this.isRootNode&&e.nextTick(()=>this.$dispatch("initialized",t.selectedNode,!1)):this.load().then(()=>{this.isRootNode&&e.nextTick(()=>this.$dispatch("initialized",t.selectedNode,"remote"))})},methods:{convert:function(t){let e="object"==typeof t&&t.converter?t.converter:l(this);return e?e.call(this,t):t},load:function(){if(this.loading)return void console.log("[tree] loading...");let t=a(this);if(t){if(this.id){let e={};e[s(this)]=this.id,t=i.appendUrlParams(t,e)}return i.get(t).then(t=>{this.loading=!1,this.items=t}).catch(e=>{this.loading=!1,console.log("[tree] load error: url=%s, error=%o",t,e);var i=e.message||"[tree] 数据加载失败！";window.bc&&bc.msg?bc.msg.alert(i):alert(i)})}},toggle:function(){if(this.collapsed=!this.collapsed,!this.collapsed&&!Array.isArray(this.children)){a(this)&&this.load()}},clickMe:function(){if(this.$dispatch("click-node",this),this.selected)return;this.selected=!0;let t=o(this),e=t.selectedNode;e&&(e.selected=!1),t.selectedNode=this,this.$dispatch("change",this,e)}}})}),/*! BC 平台的 vue 组件
 * @author dragon <rongjihuang@gmail.com>
 * @version v1.1.0 2023-06-05
 * @license Apache License 2.0
 * @components bc-theme
 *             bc-button
 *             bc-button-set
 *             bc-search
 *             bc-toolbar
 *             bc-table-col
 *             bc-loading
 *             bc-box-pointer
 *             bc-page-bar
 *             bc-page-bar-importer
 *             bc-grid
 *             bc-tree
 */
define("bc/vue/components",["bc/vue/theme","bc/vue/button","bc/vue/button-set","bc/vue/search","bc/vue/toolbar","bc/vue/box-pointer","bc/vue/loading","bc/vue/table-col","bc/vue/page-bar","bc/vue/cors","bc/vue/grid","bc/vue/tree"],function(){return 0}),function(t){var e=document,i="appendChild",n="styleSheet",r=e.createElement("style");r.type="text/css",e.getElementsByTagName("head")[0][i](r),r[n]?r[n].cssText=t:r[i](e.createTextNode(t))}(".bc-vue-search{position:relative;display:inline-block;}.bc-vue-search > .fuzzy > div{display:inline-block;position:relative;}.bc-vue-search > .fuzzy .search{position:absolute;top:50%;margin-top:-8px;left:2px;cursor:pointer;}.bc-vue-search > .fuzzy input.fuzzy{box-sizing:border-box;padding:.34em 18px;width:12em;font-family:inherit;font-size:1em;}.bc-vue-search > .fuzzy .add{position:absolute;top:50%;margin-top:-8px;right:2px;cursor:pointer;}.bc-vue-search > .advance{position:relative;margin-top:-2px;background-image:none;z-index:90;overflow:auto;display:flex;flex-direction:column;}.bc-vue-search > .advance > .conditions{border-collapse:collapse;margin:0;padding:0;list-style:none;overflow:auto;flex-grow:1;min-width:20em;}.bc-vue-search .operate{padding:0.4em;border-width:1px 0 0 0;}.bc-vue-search .condition{margin:0.4em;}.bc-vue-search .condition .label{font-weight:bold;}.bc-vue-search .condition .value{position:relative;display:flex;flex-direction:row;}.bc-vue-search .condition .value > div{display:inline-block;}.bc-vue-search .condition .value > div.left,.bc-vue-search .condition .value > div.right{flex-grow:1;background-color:gray;}.bc-vue-search .condition .value input,.bc-vue-search .condition .value select{box-sizing:border-box;min-width:9em;width:100%;padding:.34em 0 .34em .34em;font-family:inherit;font-size:1em;}.bc-vue-search .condition .value input{padding-left:calc(0.34em + 4px);}.bc-vue-search .condition .value .left,.bc-vue-search .condition .value .right{position:relative;}.bc-vue-search .operate button{font-family:inherit;}.bc-vue-toolbar{position:relative;padding:0;min-height:2.2em;word-spacing:-0.4em;font-weight:normal;}.bc-vue-toolbar > *{word-spacing:normal;font-family:inherit;font-size:1em;margin:0.2em;}.bc-vue-toolbar > .bc-vue-search{position:absolute;top:0.05em;right:0.06em;}.bc-vue-toolbar > .bc-vue-search:first-child{position:relative;margin-left:0.3em;}.bc-box-pointer{position:absolute;z-index:9999;left:0;top:0;border:none;}.bc-box-pointer > .pointer-border{position:absolute;display:block;height:0;width:0;border-width:10px;background:none;}.bc-box-pointer.left-top > .pointer-border{left:0;bottom:-12px;border-color:rgb(252,239,161) transparent transparent transparent;}.bc-box-pointer > .pointer-back{position:absolute;display:block;border:none;height:20px;width:20px;transform:translateY(-24px) rotateZ(45deg);transform-origin:50% 50% 0;}.bc-box-pointer > .box{_height:40px;position:absolute;min-width:6em;min-height:2em;bottom:5px;left:-2px;}.bc-box-pointer > .box > .content{margin:0.25em;cursor:default;}.bc-box-pointer > .box > .close{position:absolute;top:-8px;right:-8px;cursor:pointer;}.bc-vue-loading-container{position:absolute;top:0;left:0;width:100%;height:100%;}.bc-vue-loading-container > .counter,.bc-vue-loading-container > .actor{position:absolute;box-sizing:border-box;top:50%;left:50%;}.bc-vue-loading-container > .counter{width:6em;height:2em;line-height:2em;text-align:center;margin:-1em auto auto -3em;border:none;background:none;}.bc-vue-loading-container > .actor{opacity:0.8;width:3.5em;height:3.5em;margin:-1.75em auto auto -1.75em;border-width:0.5em;border-radius:50%;border-left-color:transparent;border-right-color:transparent;animation:bc-vue-loading-spin 1000ms infinite linear;}.bc-vue-loading-container > .actor.transparent{background:none;}@keyframes bc-vue-loading-spin{100%{transform:rotate(360deg);transform:rotate(360deg);}}.bc-page-bar{clear:both;display:block;margin:0;padding:0;}.bc-page-bar > li{list-style:none;cursor:default;position:relative;margin:0.2em;padding:4px 0;float:left;}.bc-page-bar .icon{cursor:pointer;}.bc-page-bar > li > span.ui-icon{float:left;margin:0 4px;}.bc-page-bar > .icons{padding:2px 2px;}.bc-page-bar > .icons > a.icon{margin:0;border:0;}.bc-page-bar > .icons span.ui-icon{margin:2px;}.bc-page-bar > li span.pageNo,.bc-page-bar > li span.pageSize{float:left;height:16px;font-size:12px;}.bc-page-bar > li span.pageNo{margin:2px 4px;cursor:default;}.bc-page-bar > li span.pageSize{margin:2px 4px;}.bc-page-bar > li > a{float:left;display:block;}.bc-page-bar-importer{position:relative;}.bc-page-bar-importer .info{width:14em;font-weight:normal;padding:5px;border:1px dashed #ccc;}.bc-page-bar-importer .buttons{position:relative;text-align:right;padding:0 4px;}.bc-page-bar-importer .buttons > .button{text-decoration:underline;cursor:pointer;position:relative;margin:auto .25em;}.bc-page-bar-importer .processing{position:absolute;left:0.25em;top:0.25em;right:0.25em;bottom:0.25em;text-align:center;border-style:dashed;line-height:1.5em;display:flex;align-items:center;padding:0.25em;}.bc-page-bar-importer .processing .show-result-detail{text-decoration:underline;cursor:pointer;margin-top:1em;}.bc-page-bar-exporter{position:relative;}.bc-page-bar-exporter .info{width:14em;font-weight:normal;padding:5px;border:1px dashed #ccc;min-height:4.5em;display:flex;align-items:center;}.bc-page-bar-exporter .buttons{position:relative;text-align:right;padding:0 4px;}.bc-page-bar-exporter .buttons > .button{text-decoration:underline;cursor:pointer;position:relative;margin:auto .25em;}.bc-page > .bc-vue-grid,.bc-vue-grid.fillup{position:absolute;top:0;bottom:0;left:0;right:0;overflow:hidden;}.bc-page > .bc-vue-grid,.bc-vue-grid.noborder{border-width:0;}.bc-vue-grid.border{border-width:1px;}.bc-vue-grid > .bc-vue-toolbar{border-width:0 0 1px 0;}.bc-vue-grid{display:flex;flex-direction:column;overflow:hidden;box-sizing:border-box;position:relative;font-weight:normal;}.bc-vue-grid > *{flex:none;}.bc-vue-grid > div.rows{flex:1 1 0%;}.bc-vue-grid table.head,.bc-vue-grid table.rows{table-layout:fixed;border-collapse:collapse;}.bc-vue-grid table.rows{margin-bottom:-1px;}.bc-vue-grid tr.head > th{font-weight:inherit;}.bc-vue-grid tr.head,.bc-vue-grid tr.row{height:2em;}.bc-vue-grid td.cell{text-align:left;white-space:normal;word-wrap:break-word;word-break:break-all;}.bc-vue-grid td.sn{text-align:center;cursor:default;}.bc-vue-grid td.sn > .ui-icon-check{display:inline-block;}.bc-vue-grid tr.main.head,.bc-vue-grid tr.row{border-width:1px 0 1px 0;}.bc-vue-grid tr.main.head:first-child,.bc-vue-grid tr.row:first-child,.bc-vue-grid tr.main.head:first-child > th,.bc-vue-grid tr.row:first-child > td{border-top:none;}.bc-vue-grid tr.main.head >:first-child,.bc-vue-grid tr.row >:first-child{border-left:none;}.bc-vue-grid tr.main.head >:last-child,.bc-vue-grid tr.row >:last-child{border-right:none;}.bc-vue-grid tr.head > *,.bc-vue-grid tr.row > *{padding:0;border-width:1px;border-color:inherit;border-style:inherit;}.bc-vue-grid td.cell.text,.bc-vue-grid th.cell.text{padding:0 0.4em;}.bc-vue-grid td.cell.text.ellipsis,.bc-vue-grid th.cell.text.ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}.bc-vue-tree .bc-vue-tree.ui-widget-content{border-width:0;}.bc-vue-tree > div.self{position:relative;display:flex;flex-direction:row;border-width:0;cursor:default;line-height:1.8em;}.bc-vue-tree > .self > span{display:inline-block;flex:none;}.bc-vue-tree > .self > span:last-child{flex:1 1 0%;padding-right:0.25em;}.bc-vue-tree > .self > span.ui-icon{margin:calc((1.8em - 16px) / 2) 0;}.bc-page > .bc-vue-tree-view > .bc-vue-toolbar{border-width:0 0 1px 0;}.bc-page > .bc-vue-tree-view > .panel > .bc-vue-tree{border-width:0 1px 0 0;}.bc-page > .bc-vue-tree-view > .panel > .bc-vue-grid{border-width:0;}.bc-page > .bc-vue-tree-view.border > .bc-vue-toolbar{border-width:1px 1px 1px 1px;}.bc-page > .bc-vue-tree-view.border > .panel > .bc-vue-tree{border-width:0 1px 1px 1px;}.bc-page > .bc-vue-tree-view.border > .panel > .bc-vue-grid{border-width:0 1px 1px 0;}.bc-vue-tree-view{display:flex;flex-direction:column;width:100%;height:100%;border:none;font-weight:normal;}.bc-vue-tree-view > .bc-vue-toolbar{flex:none;}.bc-vue-tree-view > .panel{flex:1 1 0%;display:flex;flex-direction:row;}.bc-vue-tree-view > .panel > .bc-vue-tree{flex:none;overflow:auto;min-width:8em;border-top-width:0;}.bc-vue-tree-view > .panel > .bc-vue-grid{flex:1 1 0%;border-top-width:0;border-left-width:0;}");
//# sourceMappingURL=components.min.js.map